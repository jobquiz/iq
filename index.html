<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MCQ </title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    /* বড় পপ আপ */
    .modal-xl { --bs-modal-width: 900px; }

    .question-card { padding: 16px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 18px; }
    .answer-reveal { font-size: 0.95rem; margin-top: 6px; color: #444; }
    .option-btn { text-align: left; margin-bottom: 10px; }
    .option-btn:disabled { opacity: 1; cursor: default; }
    .sticky-footer { position: sticky; bottom: 0; background: #fff; padding-top: 12px; border-top: 1px solid #eee; }

    /* সঠিক: গভীর সবুজ */
    .option-btn.correct,
    .btn-success.correct {
      background-color: #0f8a2b !important;
      border-color: #0b6a21 !important;
      color: #fff !important;
      box-shadow: 0 0 0 0.2rem rgba(15,138,43,0.25) !important;
    }
    .option-btn.correct:hover,
    .option-btn.correct:focus {
      background-color: #0d7a26 !important;
      border-color: #0a5f1e !important;
    }

    /* ভুল: উজ্জ্বল লাল */
    .option-btn.incorrect,
    .btn-danger.incorrect {
      background-color: #ff1f3d !important;
      border-color: #d3132c !important;
      color: #fff !important;
      box-shadow: 0 0 0 0.25rem rgba(255,31,61,0.25) !important;
    }
    .option-btn.incorrect:hover,
    .option-btn.incorrect:focus {
      background-color: #ff0c2e !important;
      border-color: #c50f27 !important;
    }

    /* অপশন লেবেল ব্যাজ (A/B/C/D) */
    .opt-badge {
      display: inline-block;
      min-width: 28px;
      height: 28px;
      line-height: 26px;
      text-align: center;
      border-radius: 6px;
      margin-right: 10px;
      border: 1px solid #ddd;
      background: #f7f7f7;
      font-weight: 600;
      color: #333;
    }
  </style>
</head>
<body class="p-3">

  <div class="container">
    <h3 class="mb-3">MCQ </h3>
    <p class="text-muted">নিচে ক্লিক করলেই বড় পপ-আপে ৫টি প্রশ্ন দেখাবে; অপশন হিসেবে A, B, C, D থাকবে।</p>
    <button class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#quizModal">
      কুইজ শুরু করুন
    </button>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="quizModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">৫টি তাৎক্ষণিক MCQ </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="বন্ধ করুন"></button>
        </div>

        <div class="modal-body">
          <div id="quizContainer"></div>
        </div>

        <div class="modal-footer sticky-footer">
          <div class="me-auto">
            <span id="scoreLine" class="fw-semibold">স্কোর: 0 / 5</span>
          </div>
          <button id="retryBtn" class="btn btn-outline-secondary">আবার দিন</button>
          <button class="btn btn-success" data-bs-dismiss="modal">শেষ</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // অপশন লেবেলসমূহ
    const LABELS = ["A", "B", "C", "D"]; // ০-ভিত্তিক

    // প্রশ্নব্যাংক: correctIndex সবসময় ০-ভিত্তিক হবে (A=0, B=1, C=2, D=3)
    const QUESTION_BANK = [
      {
        question: "রোমান্টিক প্রণয়োপাখ্যান ধারার প্রথম কবি কে?",
        options: ["শাহ মুহম্মদ সগীর", "সৈয়দ হামজা", "আলাওল", "ফকির গরীবুল্লাহ"],
        correctIndex: 0 // A
      },
      {
        question: "শুদ্ধ বানান নির্ণয় করুন -",
        options: ["ভ্রাতূস্পুত্র", "ভ্রাতূষ্পুত্র", "ভ্রাতুস্পুত্র", "ভ্রাতুষ্পুত্র"],
        correctIndex: 3 // D
      },
      {
        question: "অনুবর্ণ কী?",
        options: ["স্বরবর্ণের বিকল্প রূপ", "বর্ণসংক্ষেপ", "পরিবর্তিত বর্ণ", "ব্যঞ্জনবর্ণের বিকল্প রূপ"],
        correctIndex: 3 // D
      },
      {
        question: "'একটি ফটোগ্রাফ' কবিতার লেখক কে ?",
        options: ["বন্দে আলী মিয়া", "আল-মাহমুদ", "শামসুর রাহমান", "জীবনানন্দ দাশ"],
        correctIndex: 2 // C
      },
      {
        question: "'জন্ডিস ও বিবিধ বেলুন' - কোন ধরনের রচনা?",
        options: ["গল্পগ্রন্থ", "উপন্যাস", "প্রবন্ধ", "নাটক"],
        correctIndex: 3 // D
      }
      // ইচ্ছা করলে আরও প্রশ্ন যোগ করুন...
    ];

    // ৫টি প্রশ্ন এলোমেলোভাবে বাছাই
    function pickFiveRandom(arr) {
      const copy = [...arr];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy.slice(0, 5);
    }

    let currentFive = [];
    let score = 0;

    const quizContainer = document.getElementById("quizContainer");
    const scoreLine = document.getElementById("scoreLine");
    const retryBtn = document.getElementById("retryBtn");

    function renderQuiz() {
      quizContainer.innerHTML = "";
      score = 0;
      scoreLine.textContent = "স্কোর: 0 / 5";
      currentFive = pickFiveRandom(QUESTION_BANK);

      currentFive.forEach((q, qIdx) => {
        const card = document.createElement("div");
        card.className = "question-card";

        const title = document.createElement("h6");
        title.className = "mb-2";
        title.textContent = `প্রশ্ন ${qIdx + 1}: ${q.question}`;
        card.appendChild(title);

        const btnGroup = document.createElement("div");

        q.options.forEach((opt, oi) => {
          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "btn btn-outline-secondary option-btn w-100";

          // লেবেল + টেক্সট (A, B, C, D)
          const label = LABELS[oi] || "?";
          btn.innerHTML = `<span class="opt-badge">${label}</span> ${opt}`;

          btn.addEventListener("click", () => {
            if (btnGroup.dataset.locked === "1") return;
            btnGroup.dataset.locked = "1";

            const correctIdx = Number(q.correctIndex); // ০-ভিত্তিক নিশ্চিত
            const kids = btnGroup.querySelectorAll("button");

            // সব অপশন disable + সঠিকটিতে সবুজ
            kids.forEach((k, kidx) => {
              k.disabled = true;
              if (kidx === correctIdx) {
                k.classList.remove("btn-outline-secondary");
                k.classList.add("btn-success", "correct");
              }
            });

            // নির্বাচিত অপশন সঠিক-ভুল নির্ধারণ
            if (oi === correctIdx) {
              score++;
            } else {
              btn.classList.remove("btn-outline-secondary");
              btn.classList.add("btn-danger", "incorrect");
              const reveal = document.createElement("div");
              reveal.className = "answer-reveal";
              reveal.innerHTML = `সঠিক উত্তর: <strong>${LABELS[correctIdx]}. ${q.options[correctIdx]}</strong>`;
              card.appendChild(reveal);
            }

            scoreLine.textContent = `স্কোর: ${score} / 5`;
          });

          btnGroup.appendChild(btn);
        });

        card.appendChild(btnGroup);
        quizContainer.appendChild(card);
      });
    }

    // মডাল খোলার সাথে ৫টি প্রশ্ন রেন্ডার
    const quizModal = document.getElementById("quizModal");
    quizModal.addEventListener("show.bs.modal", renderQuiz);

    // আবার দিন
    retryBtn.addEventListener("click", renderQuiz);
  </script>
</body>
</html>
